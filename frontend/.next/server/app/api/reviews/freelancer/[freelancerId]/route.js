"use strict";(()=>{var e={};e.id=8548,e.ids=[8548],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},83328:(e,r,o)=>{o.r(r),o.d(r,{headerHooks:()=>v,originalPathname:()=>h,patchFetch:()=>w,requestAsyncStorage:()=>g,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>I});var t={};o.r(t),o.d(t,{GET:()=>u});var n=o(95419),a=o(69108),s=o(99678),i=o(78070),d=o(47033),l=o(44390),c=o(10192);async function u(e,{params:r}){try{await (0,d.Z)();let e=r.freelancerId;console.log("=== Reviews API Debug ==="),console.log("Fetching reviews for freelancer:",e);let o=await l.Z.find({freelancerId:e,status:"completed"});if(console.log("Found completed orders:",o.length),console.log("Orders:",o.map(e=>({id:e._id,status:e.status}))),0===o.length)return console.log("No completed orders found, returning empty array"),i.Z.json([]);let t=o.map(e=>e._id);console.log("Order IDs for review lookup:",t);let n=await c.Z.find({orderId:{$in:t}}).populate([{path:"orderId",select:"gigId clientId",populate:[{path:"clientId",select:"name"},{path:"gigId",select:"title"}]}]);console.log("Found reviews:",n.length),console.log("Reviews data:",n.map(e=>({id:e._id,rating:e.rating,orderId:e.orderId,hasOrderData:!!e.orderId})));let a=n.map(e=>({...e.toObject(),id:e._id,order:e.orderId?{client:e.orderId.clientId,gig:e.orderId.gigId}:null}));return console.log("Transformed reviews:",a.length),i.Z.json(a)}catch(o){console.error("Get freelancer reviews error:",o);let e=o instanceof Error?o.message:"Unknown error",r=o instanceof Error?o.stack:void 0;return r&&console.error("Error stack:",r),i.Z.json({message:"Server error",error:e},{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/reviews/freelancer/[freelancerId]/route",pathname:"/api/reviews/freelancer/[freelancerId]",filename:"route",bundlePath:"app/api/reviews/freelancer/[freelancerId]/route"},resolvedPagePath:"E:\\rozgaar-mongodb\\frontend\\app\\api\\reviews\\freelancer\\[freelancerId]\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:g,staticGenerationAsyncStorage:f,serverHooks:m,headerHooks:v,staticGenerationBailout:I}=p,h="/api/reviews/freelancer/[freelancerId]/route";function w(){return(0,s.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:f})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),t=r.X(0,[632,110,7842,6245,9965,6592,6310,9074,781,8057,4991,423,8844,5007,6851,3079,5312,432,2385],()=>o(83328));module.exports=t})();