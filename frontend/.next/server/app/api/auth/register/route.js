"use strict";(()=>{var e={};e.id=3002,e.ids=[3002],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},86551:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>y,originalPathname:()=>T,patchFetch:()=>w,requestAsyncStorage:()=>f,routeModule:()=>g,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>v});var a={};t.r(a),t.d(a,{POST:()=>c});var n=t(95419),s=t(69108),i=t(99678),o=t(46082),p=t.n(o),u=t(47033),d=t(70260);let l=e=>{if(!process.env.JWT_SECRET)throw Error("JWT_SECRET is not defined");return p().sign({id:e},process.env.JWT_SECRET,{expiresIn:"7d"})};async function c(e){try{await (0,u.Z)();let{name:r,email:t,password:a,role:n}=await e.json();if(!r||!t||!a)return new Response(JSON.stringify({message:"Please provide all required fields"}),{status:400,headers:{"Content-Type":"application/json"}});if(await d.Z.findOne({email:t}))return new Response(JSON.stringify({message:"Email is already registered"}),{status:400,headers:{"Content-Type":"application/json"}});if(n&&!["client","freelancer"].includes(n))return new Response(JSON.stringify({message:"Invalid role"}),{status:400,headers:{"Content-Type":"application/json"}});let s=await d.Z.create({name:r,email:t,password:a,role:n||"client"}),i=l(s._id);return new Response(JSON.stringify({token:i,user:{id:s._id,name:s.name,email:s.email,role:s.role,balance:s.balance,createdAt:s.createdAt,updatedAt:s.updatedAt}}),{status:201,headers:{"Content-Type":"application/json"}})}catch(e){return console.error("Registration error:",e),new Response(JSON.stringify({message:"Server error"}),{status:500,headers:{"Content-Type":"application/json"}})}}let g=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"E:\\rozgaar-mongodb\\frontend\\app\\api\\auth\\register\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:f,staticGenerationAsyncStorage:h,serverHooks:m,headerHooks:y,staticGenerationBailout:v}=g,T="/api/auth/register/route";function w(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[632,110,7842,6245,9965,6592,6310,9074,781,8057,4991,423,8844,5007,6851,3079,5312,432,2385],()=>t(86551));module.exports=a})();