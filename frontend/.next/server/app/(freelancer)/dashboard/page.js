(()=>{var e={};e.id=5070,e.ids=[5070],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},66042:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var a=s(50482),t=s(69108),n=s(62563),l=s.n(n),i=s(68300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(r,d);let c=["",{children:["(freelancer)",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,68981)),"E:\\rozgaar-mongodb\\frontend\\app\\(freelancer)\\dashboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,94508)),"E:\\rozgaar-mongodb\\frontend\\app\\(freelancer)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,28489)),"E:\\rozgaar-mongodb\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["E:\\rozgaar-mongodb\\frontend\\app\\(freelancer)\\dashboard\\page.tsx"],x="/(freelancer)/dashboard/page",h={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/(freelancer)/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},87420:(e,r,s)=>{Promise.resolve().then(s.bind(s,83027))},83027:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>E});var a=s(95344),t=s(3729),n=s(9046),l=s(8428),i=s(16212),d=s(56506),c=s(51838),o=s(91917),x=s(48411),h=s(76755),m=s(60619),p=s(25092),u=s(91626);let j=t.forwardRef(({className:e,...r},s)=>a.jsx("div",{ref:s,className:(0,u.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));j.displayName="Card";let f=t.forwardRef(({className:e,...r},s)=>a.jsx("div",{ref:s,className:(0,u.cn)("flex flex-col space-y-1.5 p-6",e),...r}));f.displayName="CardHeader";let g=t.forwardRef(({className:e,...r},s)=>a.jsx("h3",{ref:s,className:(0,u.cn)("text-lg font-semibold leading-none tracking-tight",e),...r}));g.displayName="CardTitle";let y=t.forwardRef(({className:e,...r},s)=>a.jsx("p",{ref:s,className:(0,u.cn)("text-sm text-muted-foreground",e),...r}));y.displayName="CardDescription";let v=t.forwardRef(({className:e,...r},s)=>a.jsx("div",{ref:s,className:(0,u.cn)("p-6 pt-0",e),...r}));v.displayName="CardContent";let N=t.forwardRef(({className:e,...r},s)=>a.jsx("div",{ref:s,className:(0,u.cn)("flex items-center p-6 pt-0",e),...r}));N.displayName="CardFooter";var b=s(31506),w=s(36478),P=s(16802),C=s(92549),F=s(1586),_=s(20157);function A({isOpen:e,onClose:r,onSuccess:s}){let[n,l]=(0,t.useState)(0),[d,c]=(0,t.useState)(!1),{toast:o}=(0,p.pm)(),x=async e=>{if(e.preventDefault(),n<=0){o({title:"Invalid amount",description:"Please enter a valid amount greater than zero.",variant:"destructive"});return}c(!0);try{await _.O.addBalance(n),o({title:"Success",description:`$${n.toFixed(2)} has been added to your balance.`}),s(),r()}catch(e){console.error("Error adding balance:",e),o({title:"Error",description:"Failed to add balance. Please try again.",variant:"destructive"})}finally{c(!1)}};return a.jsx(P.Vq,{open:e,onOpenChange:r,children:(0,a.jsxs)(P.cZ,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(P.fK,{children:[a.jsx(P.$N,{children:"Add Balance"}),a.jsx(P.Be,{children:"Enter the amount you want to add to your account."})]}),(0,a.jsxs)("form",{onSubmit:x,children:[a.jsx("div",{className:"grid gap-4 py-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(F._,{htmlFor:"amount",className:"text-right",children:"Amount"}),(0,a.jsxs)("div",{className:"col-span-3 relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),a.jsx(C.I,{id:"amount",type:"number",min:1,step:.01,value:n||"",onChange:e=>l(parseFloat(e.target.value)||0),className:"pl-7",placeholder:"0.00"})]})]})}),(0,a.jsxs)(P.cN,{children:[a.jsx(i.z,{type:"button",variant:"outline",onClick:r,disabled:d,children:"Cancel"}),a.jsx(i.z,{type:"submit",disabled:d,children:d?"Processing...":"Add Funds"})]})]})]})})}function E(){let{user:e,loading:r}=(0,n.useAuth)(),{toast:s}=(0,p.pm)(),[u,P]=(0,t.useState)([]),[C,F]=(0,t.useState)([]),[_,E]=(0,t.useState)(!0),[k,z]=(0,t.useState)(!0),[q,R]=(0,t.useState)(!1);(0,t.useEffect)(()=>{e&&(S(),"freelancer"===e.role&&$())},[e]);let S=async()=>{try{E(!0);let e=await m.X.fetchOrders();console.log("Fetched orders:",e),console.log("First order structure:",e?.[0]),e?.[0]&&(console.log("First order gig:",e[0].gig),console.log("First order client:",e[0].client),console.log("First order freelancer:",e[0].freelancer)),P(e)}catch(e){console.error("Error fetching orders:",e),console.error("Error details:",e instanceof Error?e.message:e),s({title:"Error",description:"Failed to fetch orders",variant:"destructive"})}finally{E(!1)}},$=async()=>{if(e)try{z(!0);let r=await m.X.getFreelancerReviews(e.id);console.log("Fetched reviews:",r),F(r||[])}catch(e){console.error("Error fetching reviews:",e),F([])}finally{z(!1)}};if(r)return a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"flex flex-col items-center justify-center space-y-8 text-center",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})});e||(0,l.redirect)("/login");let G=u.filter(e=>"completed"===e.status),X=u.filter(e=>["pending","in_progress","delivered"].includes(e.status));return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(w.oX,{direction:"left",children:a.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"})}),(0,a.jsxs)("div",{className:"flex space-x-4",children:["admin"===e.role&&a.jsx(w.oX,{direction:"right",children:a.jsx(d.default,{href:"/admin",children:a.jsx(i.z,{variant:"outline",children:"Admin Dashboard"})})}),"freelancer"===e.role&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(w.oX,{direction:"right",children:a.jsx(d.default,{href:"/freelancerGigs/create",children:(0,a.jsxs)(i.z,{children:[a.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"Create Gig"]})})}),a.jsx(w.oX,{direction:"right",delay:.05,children:a.jsx(d.default,{href:"/freelancerGigs",children:(0,a.jsxs)(i.z,{variant:"secondary",children:[a.jsx(o.Z,{className:"mr-2 h-4 w-4"}),"My Gigs"]})})})]})]})]}),(0,a.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(w.oX,{direction:"up",delay:.1,children:(0,a.jsxs)(j,{children:[(0,a.jsxs)(f,{children:[(0,a.jsxs)(g,{className:"flex items-center",children:[a.jsx(x.Z,{className:"mr-2 h-5 w-5"}),"Balance"]}),a.jsx(y,{children:"Your current balance"})]}),a.jsx(v,{children:(0,a.jsxs)("p",{className:"text-3xl font-bold",children:["$",e.balance.toFixed(2)]})}),a.jsx(N,{children:a.jsx(i.z,{className:"w-full",onClick:()=>R(!0),children:"Add Funds"})})]})}),a.jsx(w.oX,{direction:"up",delay:.2,children:(0,a.jsxs)(j,{children:[(0,a.jsxs)(f,{children:[(0,a.jsxs)(g,{className:"flex items-center",children:[a.jsx(o.Z,{className:"mr-2 h-5 w-5"}),"Orders"]}),a.jsx(y,{children:"Your orders overview"})]}),a.jsx(v,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Total Orders:"}),a.jsx("span",{children:u.length})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Completed:"}),a.jsx("span",{children:G.length})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Active:"}),a.jsx("span",{children:X.length})]})]})}),a.jsx(N,{children:a.jsx(d.default,{href:"/orders",className:"w-full",children:a.jsx(i.z,{className:"w-full",children:"View All Orders"})})})]})}),"freelancer"===e.role&&a.jsx(w.oX,{direction:"up",delay:.3,children:(0,a.jsxs)(j,{children:[(0,a.jsxs)(f,{children:[(0,a.jsxs)(g,{className:"flex items-center",children:[a.jsx(h.Z,{className:"mr-2 h-5 w-5"}),"Reviews"]}),a.jsx(y,{children:"Your client reviews"})]}),a.jsx(v,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Total Reviews:"}),a.jsx("span",{children:C.length})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Average Rating:"}),a.jsx("span",{children:C.length>0?(C.reduce((e,r)=>e+r.rating,0)/C.length).toFixed(1):"No reviews yet"})]})]})}),a.jsx(N,{children:a.jsx(i.z,{className:"w-full",variant:"outline",onClick:()=>document.getElementById("reviews-section")?.scrollIntoView({behavior:"smooth"}),children:"View All Reviews"})})]})})]}),a.jsx(w.Uo,{delay:.4,children:(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold mb-4",children:["Welcome back, ",e.name,"!"]}),a.jsx("p",{className:"text-gray-600",children:"freelancer"===e.role?"Manage your gigs, track your orders, and see what clients are saying about your work.":"Browse gigs, place orders, and track your projects all in one place."})]})}),a.jsx(w.Uo,{delay:.5,children:(0,a.jsxs)("div",{className:"mt-8",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Recent Orders"}),_?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):u.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.slice(0,3).map((r,s)=>a.jsx(w.oX,{direction:"up",delay:.6+.1*s,children:a.jsx(d.default,{href:`/orders/${r.id}`,children:(0,a.jsxs)(j,{className:"cursor-pointer hover:shadow-md transition-shadow",children:["                      ",(0,a.jsxs)(f,{children:[a.jsx(g,{className:"text-lg",children:r.gig?.title||"Unknown Gig"}),a.jsx(y,{children:"freelancer"===e.role?`Client: ${r.client?.name||"Unknown Client"}`:`Freelancer: ${r.freelancer?.name||"Unknown Freelancer"}`})]}),a.jsx(v,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Status:"}),a.jsx("span",{className:`font-medium ${"completed"===r.status?"text-green-600":"cancelled"===r.status?"text-red-600":"text-orange-600"}`,children:r.status.charAt(0).toUpperCase()+r.status.slice(1).replace(/_/g," ")})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Price:"}),(0,a.jsxs)("span",{children:["$",r.price]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Date:"}),a.jsx("span",{children:(0,b.Q)(new Date(r.createdAt),{addSuffix:!0})})]})]})})]})})},r.id))}):a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No orders yet"}),u.length>3&&a.jsx("div",{className:"mt-4 text-center",children:a.jsx(d.default,{href:"/orders",children:a.jsx(i.z,{variant:"outline",children:"View All Orders"})})})]})}),"freelancer"===e.role&&a.jsx(w.Uo,{delay:.7,children:(0,a.jsxs)("div",{id:"reviews-section",className:"mt-12",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Client Reviews"}),k?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):C.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:C.map((e,r)=>a.jsx(w.oX,{direction:"up",delay:.8+.1*r,children:(0,a.jsxs)(j,{children:[(0,a.jsxs)(f,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx(g,{className:"text-lg",children:e.order?.gig?e.order?.gig.title:"Deleted Gig"}),a.jsx("div",{className:"flex items-center",children:Array.from({length:5}).map((r,s)=>a.jsx(h.Z,{className:`h-4 w-4 ${s<e.rating?"text-black fill-black":"text-gray-300"}`},s))})]}),(0,a.jsxs)(y,{children:["From: ",e.order?.client.name]})]}),a.jsx(v,{children:e.comment?a.jsx("p",{className:"text-gray-600",children:e.comment}):a.jsx("p",{className:"text-gray-500 italic",children:"No comment provided"})}),a.jsx(N,{className:"text-sm text-gray-500",children:(0,b.Q)(new Date(e.createdAt),{addSuffix:!0})})]})},e.id))}):a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No reviews yet"})]})}),a.jsx(A,{isOpen:q,onClose:()=>R(!1),onSuccess:()=>{window.location.reload()}})]})}},68981:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>n,__esModule:()=>t,default:()=>l});let a=(0,s(86843).createProxy)(String.raw`E:\rozgaar-mongodb\frontend\app\(freelancer)\dashboard\page.tsx`),{__esModule:t,$$typeof:n}=a,l=a.default}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[632,110,7842,6245,9965,6592,6310,9074,781,8057,4991,423,8844,5007,6851,3079,5312,432,2385],()=>s(66042));module.exports=a})();